# ğŸ”” Subscription Renewal Reminders

A Flask-based web application that demonstrates **webhook implementation** for automated subscription renewal notifications. This project showcases how webhooks can be used to create real-time, event-driven communication between systems for subscription management.

## ğŸ“‹ Table of Contents

- [What are Webhooks?](#what-are-webhooks)
- [Project Overview](#project-overview)
- [Architecture & Flow](#architecture--flow)
- [Features](#features)
- [Installation & Setup](#installation--setup)
- [Usage](#usage)
- [API Endpoints](#api-endpoints)
- [Project Structure](#project-structure)
- [Technologies Used](#technologies-used)
- [Contributing](#contributing)

## ğŸ¯ What are Webhooks?

**Webhooks** are HTTP callbacks that enable real-time communication between different systems. Instead of constantly polling for updates (which wastes resources), webhooks allow one system to automatically notify another when specific events occur.

### Key Benefits:
- **Real-time notifications**: Instant event-driven communication
- **Resource efficient**: No need for constant polling
- **Scalable**: Handles multiple events simultaneously
- **Decoupled architecture**: Systems remain independent

### How Webhooks Work:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Event Occurs    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   System A  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   System B  â”‚
â”‚ (Publisher) â”‚                    â”‚ (Subscriber)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                   HTTP POST Request
                                   (with event data)
```

## ğŸš€ Project Overview

This application simulates a subscription management system where:

1. **External systems** (subscription services) send webhook notifications when subscriptions are about to expire
2. **Our Flask app** receives these webhooks and processes renewal reminders
3. **Email notifications** with AI-generated messages are sent to users
4. **Dashboard interface** provides visual subscription management

## ğŸ—ï¸ Architecture & Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Webhook POST     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Subscription   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚   Flask App     â”‚
â”‚   Service       â”‚  /webhook/sub...    â”‚  (This Project) â”‚
â”‚ (Netflix, etc.) â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
                                                 â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  Email Service  â”‚
                                    â”‚  (Flask-Mail)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  User's Email   â”‚
                                    â”‚   ğŸ“§ Reminder   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Detailed Flow Diagram:

```
ğŸ“± External System          ğŸŒ Flask App          ğŸ“§ Email System          ğŸ‘¤ User
      â”‚                         â”‚                      â”‚                     â”‚
      â”‚ 1. Subscription Event   â”‚                      â”‚                     â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚                     â”‚
      â”‚                         â”‚ 2. Process Webhook   â”‚                     â”‚
      â”‚                         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                     â”‚
      â”‚                         â”‚                      â”‚ 3. Generate AI Msg â”‚
      â”‚                         â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
      â”‚                         â”‚                      â”‚                     â”‚
      â”‚                         â”‚                      â”‚ 4. Send Email      â”‚
      â”‚                         â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
      â”‚                         â”‚ 5. Return Response   â”‚                     â”‚
      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                     â”‚
```

## âœ¨ Features

### Core Webhook Functionality
- **RESTful webhook endpoint** (`/webhook/subscription`) for receiving subscription events
- **Event processing** with subscription validation and expiry checking
- **Automated email notifications** with HTML templates
- **AI-powered message generation** for personalized reminders

### User Interface
- **Modern dashboard** with subscription overview
- **Real-time updates** with auto-refresh functionality
- **Interactive management** (renew/cancel subscriptions)
- **Responsive design** using Bootstrap 5

### Email System
- **HTML email templates** with professional styling
- **Dynamic content** based on subscription status
- **Visual indicators** for urgency levels
- **Call-to-action buttons** for easy renewal

## ğŸ› ï¸ Installation & Setup

### Prerequisites
- Python 3.9 or higher
- Virtual environment (recommended)
- SMTP server access for email functionality

### Local Development Setup

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd SubscriptionRenewalReminders
   ```

2. **Create and activate virtual environment**
   ```bash
   python -m venv envSubscripNotifWH
   
   # On Windows
   envSubscripNotifWH\Scripts\activate
   
   # On macOS/Linux
   source envSubscripNotifWH/bin/activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Configure email settings**
   Create a `.env` file with your email configuration:
   ```env
   MAIL_SERVER=smtp.gmail.com
   MAIL_PORT=587
   MAIL_USE_TLS=True
   MAIL_USERNAME=your-email@gmail.com
   MAIL_PASSWORD=your-app-password
   MAIL_DEFAULT_SENDER=noreply@yourdomain.com
   ```

5. **Run the application**
   ```bash
   python main.py
   ```

6. **Access the dashboard**
   Open your browser and navigate to `http://localhost:5000`

### Docker Setup

1. **Build the Docker image**
   ```bash
   docker build -t subscription-reminders .
   ```

2. **Run the container**
   ```bash
   docker run -p 5000:5000 subscription-reminders
   ```

## ğŸ“Š Usage

### Dashboard Interface
- View all active subscriptions with expiry dates
- Monitor days remaining for each subscription
- Renew or cancel subscriptions with one click
- Visual indicators for urgent renewals

### Webhook Testing
Use tools like **Postman** or **curl** to test the webhook endpoint:

```bash
curl -X POST http://localhost:5000/webhook/subscription \
  -H "Content-Type: application/json" \
  -d '{"user_id": "user123"}'
```

### Expected Response:
```json
{
  "status": "Reminder sent"
}
```

## ğŸ”Œ API Endpoints

### Webhook Endpoint
- **URL**: `/webhook/subscription`
- **Method**: `POST`
- **Content-Type**: `application/json`

**Request Body:**
```json
{
  "user_id": "string"
}
```

**Responses:**
- `200`: Reminder sent successfully
- `404`: User not found
- `400`: Invalid request format

### Web Interface Endpoints
- **GET** `/` - Dashboard view
- **POST** `/renew/<user_id>` - Renew subscription
- **POST** `/cancel/<user_id>` - Cancel subscription

## ğŸ“ Project Structure

```
SubscriptionRenewalReminders/
â”œâ”€â”€ main.py                     # Flask application entry point
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ dashboard.html          # Main dashboard interface
â”‚   â””â”€â”€ reminder_email.html     # Email notification template
â”œâ”€â”€ requirements.txt            # Python dependencies
â”œâ”€â”€ Dockerfile                  # Container configuration
â”œâ”€â”€ .gitignore                  # Git ignore patterns
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci_cd_workflow.yml  # GitHub Actions CI/CD
â””â”€â”€ README.md                   # Project documentation
```

## ğŸ”§ Technologies Used

### Backend
- **Flask**: Lightweight web framework for Python
- **Flask-Mail**: Email sending capabilities
- **Threading**: Background webhook simulation
- **DateTime**: Subscription expiry management

### Frontend
- **Bootstrap 5**: Modern responsive CSS framework
- **Bootstrap Icons**: Comprehensive icon library
- **Jinja2**: Template engine for dynamic content
- **Custom CSS**: Enhanced styling and animations

### DevOps & Deployment
- **Docker**: Containerization for consistent deployment
- **GitHub Actions**: Automated CI/CD pipeline
- **Gunicorn**: Production WSGI servers

## ğŸ¨ Key Code Concepts

### Webhook Implementation
The core webhook functionality demonstrates several important concepts:

**Event-Driven Architecture**: The application responds to external events rather than polling for changes.

```python
@app.route('/webhook/subscription', methods=['POST'])
def subscription_webhook():
    data = request.json
    user_id = data.get('user_id')
    # Process the webhook event...
```

**Conditional Logic**: Only sends reminders when specific conditions are met (â‰¤ 7 days remaining).

**Error Handling**: Proper HTTP status codes and error responses for robust communication.

### AI Message Generation
The application includes a simple AI message generator that creates personalized reminder messages:

```python
def generate_ai_message(service, days_left):
    templates = [
        f"Your {service} subscription expires in {days_left} days! Renew now to avoid interruption.",
        f"Only {days_left} days left on your {service} subscription. Don't lose access!",
        f"Heads up! Your {service} subscription ends in {days_left} days. Renew today!"
    ]
    return random.choice(templates)
```

### Email Integration
The application demonstrates how to integrate email functionality with webhook processing:

- **HTML email templates** for professional appearance
- **Dynamic content injection** based on subscription data
- **Error handling** for email delivery failures

## ğŸ”„ Webhook Workflow

1. **Event Trigger**: External subscription service detects upcoming expiry
2. **Webhook Call**: Service sends HTTP POST to `/webhook/subscription`
3. **Data Validation**: Flask app validates user and subscription data
4. **Condition Check**: Verifies if reminder is needed (â‰¤ 7 days)
5. **Message Generation**: Creates personalized AI reminder message
6. **Email Delivery**: Sends HTML email notification to user
7. **Response**: Returns success/failure status to calling service

## ğŸš¦ Running in Production

### Environment Variables
Set up the following environment variables for production:

```env
FLASK_ENV=production
MAIL_SERVER=your-smtp-server
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-email@domain.com
MAIL_PASSWORD=your-secure-password
SECRET_KEY=your-secret-key-here
```

### Security Considerations
- Use environment variables for sensitive configuration
- Implement webhook signature verification in production
- Add rate limiting for webhook endpoints
- Use HTTPS for all webhook communications
- Validate and sanitize all incoming webhook data

## ğŸ§ª Testing Webhooks

### Manual Testing
1. Start the Flask application
2. Use curl or Postman to send webhook requests
3. Monitor console output for email confirmations
4. Check dashboard for subscription updates

### Automated Testing
The project includes GitHub Actions workflow for:
- **Unit testing** with pytest
- **Code quality** checks with flake8
- **Security scanning** with bandit
- **Dependency vulnerability** checks with safety

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“ Future Enhancements

- **Database integration** (PostgreSQL/MySQL) for persistent storage
- **Webhook signature verification** for enhanced security
- **User authentication** and session management
- **Multiple notification channels** (SMS, Slack, Discord)
- **Advanced AI messaging** with machine learning
- **Subscription analytics** and reporting
- **Mobile app integration**
- **Payment gateway integration** for automatic renewals

## ğŸ“œ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ†˜ Support

If you encounter any issues or have questions:

1. Check the [Issues](../../issues) page for existing solutions
2. Create a new issue with detailed information
3. Contact the development team

---

**Built with â¤ï¸ for learning webhook implementations and subscription management**